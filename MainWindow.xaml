<Window x:Class="Kiosk.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Школьный информационный киоск"
        WindowState="Maximized"
        WindowStyle="None"
        KeyDown="Window_KeyDown"
        Background="#0D1B2A">

    <Window.Resources>
        <!-- Поддержка эмодзи -->
        <Style TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI Emoji, Segoe UI, sans-serif"/>
        </Style>


        <!-- Стиль главных кнопок меню (сенсорный) -->
        <Style x:Key="MainMenuButton" TargetType="Button">
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                CornerRadius="24"
                                Background="{TemplateBinding Background}">
                            <Border.Effect>
                                <DropShadowEffect Color="#000000" Opacity="0.45"
                                                  BlurRadius="22" ShadowDepth="7"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.96" ScaleY="0.96"
                                                        CenterX="0.5" CenterY="0.5"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="border" Property="Opacity" Value="0.82"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.88"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль кнопки настроек -->
        <Style x:Key="SmallButton" TargetType="Button">
            <Setter Property="Width" Value="68"/>
            <Setter Property="Height" Value="68"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="16" Background="#1E3A5F">
                            <Border.Effect>
                                <DropShadowEffect Color="#000" Opacity="0.3"
                                                  BlurRadius="10" ShadowDepth="3"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#2A5298"/>
                                <Setter TargetName="border" Property="Opacity" Value="0.85"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#254780"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ComboBox — чёрный текст на белом фоне -->
        <Style x:Key="TouchComboBox" TargetType="ComboBox">
            <Setter Property="Height" Value="60"/>
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#2A5298"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="14,0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

    </Window.Resources>

    <Grid>

        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#0D1B2A" Offset="0"/>
                <GradientStop Color="#1A2F4A" Offset="0.5"/>
                <GradientStop Color="#0A1628" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <!-- Декоративные круги фона -->
        <Canvas IsHitTestVisible="False" Opacity="0.05">
            <Ellipse Canvas.Left="-150" Canvas.Top="-150" Width="500" Height="500"
                     Fill="Transparent" Stroke="#4A90D9" StrokeThickness="80"/>
            <Ellipse Canvas.Left="900" Canvas.Top="300" Width="350" Height="350"
                     Fill="Transparent" Stroke="#7B61FF" StrokeThickness="70"/>
        </Canvas>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- ШАПКА -->
            <Border Grid.Row="0" Padding="28,16,28,16">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="#0D1F35" Offset="0"/>
                        <GradientStop Color="#122840" Offset="0.5"/>
                        <GradientStop Color="#0D1F35" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Border.Effect>
                    <DropShadowEffect Color="#000" Opacity="0.5" BlurRadius="20"
                                      ShadowDepth="4" Direction="270"/>
                </Border.Effect>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Логотип -->
                    <Border Grid.Column="0" Width="84" Height="84" CornerRadius="18"
                            Margin="0,0,22,0">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#1E4DB7" Offset="0"/>
                                <GradientStop Color="#3B82F6" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Image Source="pack://application:,,,/Images/Logo.png"
                               Stretch="Uniform" Margin="8"/>
                    </Border>

                    <!-- Название школы -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock x:Name="SchoolFullNameText"
                                   Text="Муниципальное бюджетное общеобразовательное учреждение"
                                   Foreground="#8AADD4" FontSize="17" FontWeight="Normal"
                                   TextWrapping="Wrap" Margin="0,0,0,5"/>
                        <TextBlock x:Name="SchoolShortNameText"
                                   Text="Средняя общеобразовательная школа «Лига первых»"
                                   Foreground="White" FontSize="27" FontWeight="Bold"
                                   TextWrapping="Wrap"/>
                    </StackPanel>

                    <!-- Время, дата и кнопка настроек -->
                    <StackPanel Grid.Column="2" VerticalAlignment="Center"
                                HorizontalAlignment="Right" Margin="20,0,0,0">
                        <Border CornerRadius="14" Padding="22,8" Margin="0,0,0,8"
                                BorderThickness="2">
                            <Border.Background>
                                <SolidColorBrush Color="#0D1F35"/>
                            </Border.Background>
                            <Border.BorderBrush>
                                <SolidColorBrush Color="#2A5298"/>
                            </Border.BorderBrush>
                            <TextBlock x:Name="TimeText" Text="00:00:00"
                                       Foreground="#4FC3F7" FontSize="42"
                                       FontWeight="Bold" FontFamily="Consolas"
                                       TextAlignment="Center"/>
                        </Border>
                        <TextBlock x:Name="DateText" Text="понедельник, 1 января 2025"
                                   Foreground="#8AADD4" FontSize="16"
                                   TextAlignment="Center" Margin="0,0,0,12"/>
                        <Button x:Name="SettingsButton" Style="{StaticResource SmallButton}"
                                Click="SettingsButton_Click"
                                HorizontalAlignment="Right">
                            <Image Source="pack://application:,,,/Images/settings_emoji.png"
                                   Width="34" Height="34"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ОСНОВНОЙ КОНТЕНТ -->
            <Grid Grid.Row="1" Margin="16,14,16,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1.7*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <!-- ЛЕВАЯ ЧАСТЬ: 5 кнопок — ряд 1 (3 кнопки) + ряд 2 (2 кнопки) -->
                <Grid Grid.Column="0" Margin="0,0,12,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Первый ряд: Расписание, Замены, О проекте -->
                    <UniformGrid Grid.Row="0" Columns="3">

                        <!-- Расписание -->
                        <Button x:Name="ScheduleButton"
                                Style="{StaticResource MainMenuButton}"
                                Click="ScheduleButton_Click">
                            <Button.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#1E4DB7" Offset="0"/>
                                    <GradientStop Color="#3B82F6" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Image Source="pack://application:,,,/Images/ring.png"
                                       Width="72" Height="72" Margin="0,0,0,12"/>
                                <TextBlock Text="Расписание" Foreground="White"
                                           FontSize="22" FontWeight="Bold" TextAlignment="Center"/>
                                <TextBlock Text="Уроки и классы" Foreground="#BFD9FF"
                                           FontSize="15" TextAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Button>

                        <!-- Замены -->
                        <Button x:Name="ReplacementsButton"
                                Style="{StaticResource MainMenuButton}"
                                Click="ReplacementsButton_Click">
                            <Button.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#B45309" Offset="0"/>
                                    <GradientStop Color="#F59E0B" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Image Source="pack://application:,,,/Images/refresh_emoji.png"
                                       Width="72" Height="72" Margin="0,0,0,12"/>
                                <TextBlock Text="Замены" Foreground="White"
                                           FontSize="22" FontWeight="Bold" TextAlignment="Center"/>
                                <TextBlock Text="Изменения сегодня" Foreground="#FEF3C7"
                                           FontSize="15" TextAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Button>

                        <!-- О проекте -->
                        <Button x:Name="AboutButton"
                                Style="{StaticResource MainMenuButton}"
                                Click="AboutButton_Click">
                            <Button.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#6D28D9" Offset="0"/>
                                    <GradientStop Color="#A855F7" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Image Source="pack://application:,,,/Images/AIhelper.png"
                                       Width="72" Height="72" Margin="0,0,0,12"/>
                                <TextBlock Text="О проекте" Foreground="White"
                                           FontSize="22" FontWeight="Bold" TextAlignment="Center"/>
                                <TextBlock Text="Информация о киоске" Foreground="#EDE9FE"
                                           FontSize="15" TextAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Button>

                    </UniformGrid>

                    <!-- Второй ряд: Карта, Новости — растянуты на 2 колонки каждая -->
                    <UniformGrid Grid.Row="1" Columns="2">

                        <!-- Карта здания -->
                        <Button x:Name="MapBrowserButton"
                                Style="{StaticResource MainMenuButton}"
                                Click="MapBrowserButton_Click">
                            <Button.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#065F46" Offset="0"/>
                                    <GradientStop Color="#10B981" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Image Source="pack://application:,,,/Images/map_emoji.png"
                                       Width="72" Height="72" Margin="0,0,0,12"/>
                                <TextBlock Text="Карта здания" Foreground="White"
                                           FontSize="22" FontWeight="Bold" TextAlignment="Center"/>
                                <TextBlock Text="Навигация по школе" Foreground="#D1FAE5"
                                           FontSize="15" TextAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Button>

                        <!-- Новости -->
                        <Button x:Name="News"
                                Style="{StaticResource MainMenuButton}"
                                Click="NewsButton_Click">
                            <Button.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#1D4ED8" Offset="0"/>
                                    <GradientStop Color="#7C3AED" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Image Source="pack://application:,,,/Images/newsVK.png"
                                       Width="72" Height="72" Margin="0,0,0,12"/>
                                <TextBlock Text="Новости" Foreground="White"
                                           FontSize="22" FontWeight="Bold" TextAlignment="Center"/>
                                <TextBlock Text="Школьная жизнь" Foreground="#EDE9FE"
                                           FontSize="15" TextAlignment="Center" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Button>

                    </UniformGrid>

                </Grid>

                <!-- ПРАВАЯ ЧАСТЬ: Помощник -->
                <Border Grid.Column="1" CornerRadius="22" ClipToBounds="True" BorderThickness="1.5">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#0F2341" Offset="0"/>
                            <GradientStop Color="#0D1B2A" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.BorderBrush>
                        <SolidColorBrush Color="#1E4DB7"/>
                    </Border.BorderBrush>
                    <Border.Effect>
                        <DropShadowEffect Color="#000" Opacity="0.4" BlurRadius="22" ShadowDepth="0"/>
                    </Border.Effect>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Заголовок помощника -->
                        <Border Grid.Row="0" Padding="20,16" CornerRadius="22,22,0,0">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#1E4DB7" Offset="0"/>
                                    <GradientStop Color="#3B82F6" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <StackPanel Orientation="Horizontal">
                                <Image Source="pack://application:,,,/Images/AIhelper.png"
                                       Width="42" Height="42" Margin="0,0,12,0"/>
                                <TextBlock Text="Помощник" Foreground="White"
                                           FontSize="24" FontWeight="Bold"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>

                        <!-- Выбор класса -->
                        <Border Grid.Row="1" Padding="14,12">
                            <Border.Background>
                                <SolidColorBrush Color="#0F2341"/>
                            </Border.Background>
                            <StackPanel>
                                <TextBlock Text="Выберите класс:" Foreground="#8AADD4"
                                           FontSize="17" Margin="0,0,0,8"/>
                                <ComboBox x:Name="AIClassComboBox"
                                          Style="{StaticResource TouchComboBox}"
                                          SelectionChanged="AIClassComboBox_SelectionChanged"/>
                            </StackPanel>
                        </Border>

                        <!-- Контент помощника -->
                        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto"
                                      Padding="14,10,6,14">
                            <StackPanel x:Name="AIContentPanel"/>
                        </ScrollViewer>

                    </Grid>
                </Border>

            </Grid>

            <!-- СТРОКА СОСТОЯНИЯ -->
            <Border Grid.Row="2" Padding="28,10" Background="#0A1628">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="StatusText" Grid.Column="0"
                               Text="Загрузка данных..."
                               Foreground="#4A6A8A" FontSize="14"
                               VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="1"
                               Text="© RENDERGAMES • Школьный киоск"
                               Foreground="#2A4A6A" FontSize="13"
                               VerticalAlignment="Center"/>
                </Grid>
            </Border>

        </Grid>

        <!-- РЕЖИМ БАННЕРОВ -->
        <Grid x:Name="BannerGrid" Visibility="Collapsed" Opacity="0" Background="#000000">
            <Image x:Name="BannerImage" Stretch="Uniform" Opacity="0"/>
            <Border VerticalAlignment="Bottom" HorizontalAlignment="Center"
                    Margin="0,0,0,40" Padding="30,14" CornerRadius="30"
                    Background="#80000000">
                <TextBlock Text="Нажмите в любом месте для продолжения"
                           Foreground="White" FontSize="22" TextAlignment="Center"/>
            </Border>
            <Button x:Name="ExitBannerButton" Visibility="Collapsed"
                    Click="ExitBannerButton_Click"/>
        </Grid>

    </Grid>
</Window>
